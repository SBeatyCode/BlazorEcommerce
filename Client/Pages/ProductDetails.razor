@page "/product/{id:int}"
@inject IProductService ProductService
@using BlazorEcommerce.Client.Services.ProductServices;

@if (product == null)
{
	<span>@message</span>
}
else
{
	<div class="media">
		<div class="media-img-wrapper mr-2">
			<img class="media-img" src="@product.ImageUrl" atl="@product.Name">
		</div>
		<div class="media-body">
			<h2>@product.Name</h2>
			<p>@product.Description</p>
			<h4 class="price">$@product.Price</h4>
		</div>
	</div>
}

@code {
	private Product? product = null;
	private string message = string.Empty;

	[Parameter]
	public int Id { get; set; }

	protected override async Task OnParametersSetAsync()
	{
		message = "Fetching Product. . .";

		var result = await ProductService.GetProductbyIdAsync(Id);

		if (result.Success == false)
			message = result.Message;
		else
			product = result.Data;
	}

}
